<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Cons√≥rcio Inteligente</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <div class="header-section">
        <h1>Simulador Financeiro de Cons√≥rcio</h1>
        
        <div class="type-selector">
            <button class="type-btn active" onclick="setConsortiumType('veiculo')">üöó Ve√≠culos</button>
            <button class="type-btn" onclick="setConsortiumType('imovel')">üè† Im√≥veis</button>
            <button class="type-btn" onclick="setConsortiumType('equipamento')">üöú Equipamentos / Comercial</button>
        </div>
    </div>

    <!-- Coluna da Esquerda: Inputs -->
    <div class="card">
        <h2 id="tituloParametros">Par√¢metros (Ve√≠culos)</h2>
        <div class="form-grid">
            
            <div class="form-group">
                <label>Aplica√ß√£o Inicial (R$)</label>
                <input type="number" id="valorAplicado" value="35000">
            </div>

            <div class="form-group">
                <label>Rendimento Aplica√ß√£o (% a.m.)</label>
                <input type="number" id="rendimentoMensal" value="0.8" step="0.01">
            </div>

            <div class="form-group full-width">
                <label>Valor da Carta de Cr√©dito (R$)</label>
                <input type="number" id="valorCarta" value="75000" oninput="atualizarDadosEntrada()">
            </div>

            <div class="form-group">
                <label>Taxa de Adm. Total (%)</label>
                <input type="number" id="taxaAdmin" value="23.4" step="0.1">
            </div>

            <div class="form-group">
                <label>Prazo Total (meses)</label>
                <input type="number" id="prazoTotal" value="76">
            </div>

            <!-- NOVO CAMPO: Reajuste INCC -->
            <div class="form-group">
                <label class="tooltip-container">
                    Reajuste Anual (% a.a.) ‚ÑπÔ∏è
                    <span class="tooltip-text">O INCC/IPCA corrige o valor da carta e das parcelas a cada 12 meses.</span>
                </label>
                <input type="number" id="taxaReajuste" value="6.0" step="0.1" max="20" min="0">
                <span class="error-msg" id="erroReajuste"></span>
            </div>

            <div class="form-group">
                <label>M√™s da Contempla√ß√£o</label>
                <input type="number" id="mesContemplacao" value="1">
            </div>

            <div class="form-group">
                <label>Desc. Parcela Inicial (%)</label>
                <input type="number" id="pctDesconto" value="30" placeholder="Ex: 50">
            </div>

            <!-- Checkbox de Automa√ß√£o -->
            <div class="checkbox-wrapper">
                <input type="checkbox" id="chkAutoLance" onchange="toggleAutoLance()">
                <label for="chkAutoLance">Ajustar Lance Livre para atingir:</label>
                <input type="number" id="targetPercent" class="target-input" value="60" min="1" max="100" step="1" oninput="atualizarDadosEntrada()" disabled>
                <label for="chkAutoLance" style="cursor: pointer;">% do total</label>
            </div>

            <div class="form-group">
                <label>Lance Livre (R$)</label>
                <input type="number" id="lanceLivre" value="30000">
            </div>

            <div class="form-group">
                <label>% Lance Embutido</label>
                <input type="number" id="pctLanceEmbutido" value="20" step="1" oninput="atualizarDadosEntrada()">
            </div>

            <div class="form-group full-width">
                <label>Valor Lance Embutido (Calculado)</label>
                <input type="text" id="valorLanceEmbutidoDisplay" readonly value="R$ 15.000,00">
            </div>
            
            <div class="form-group full-width">
                <label id="labelRendimentoExtra">Rendimento Mensal do Autom√≥vel (R$)</label>
                <input type="number" id="rendimentoCarro" value="0">
                <span class="explanation" id="explRendimentoExtra">V√°lido a partir do m√™s seguinte √† contempla√ß√£o.</span>
            </div>

            <div class="disclaimer-box">
                ‚ö†Ô∏è Valores estimados para simula√ß√£o. O reajuste real depende do √≠ndice oficial (INCC/IPCA) aplicado pela administradora na data de anivers√°rio do grupo.
            </div>

            <button class="calc-btn" onclick="calcular()">CALCULAR SIMULA√á√ÉO</button>
        </div>
    </div>

    <!-- Coluna da Direita: Resultados -->
    <div class="card" id="resultados">
        <h2>Resultados Financeiros</h2>
        
        <div class="result-item">
            <div>
                <span class="result-label">Valor L√≠quido Liberado</span>
                <span class="explanation">Carta de cr√©dito (-) Lance Embutido</span>
            </div>
            <span class="result-value highlight-green" id="resValorLiberado">R$ 0,00</span>
        </div>

        <div class="result-item">
            <div>
                <span class="result-label">Presta√ß√£o Mensal Inicial</span>
                <span class="explanation">Valor base (sem reajuste anual)</span>
            </div>
            <span class="result-value reference-val" id="resPrestacaoNormal">R$ 0,00</span>
        </div>

        <div class="result-item">
            <div>
                <span class="result-label">Presta√ß√£o (At√© Contempla√ß√£o)</span>
                <span class="explanation">Com desconto inicial aplicado</span>
            </div>
            <span class="result-value" id="resPrestacaoAntes">R$ 0,00</span>
        </div>

        <div class="result-item">
            <div>
                <span class="result-label">Presta√ß√£o (P√≥s Contempla√ß√£o)</span>
                <span class="explanation">Recalculada ap√≥s amortiza√ß√£o</span>
            </div>
            <span class="result-value highlight-blue" id="resPrestacaoApos">R$ 0,00</span>
        </div>

        <div class="result-item">
            <div>
                <span class="result-label">Total Pago (Estimado)</span>
                <span class="explanation">Soma de todas parcelas e lances</span>
            </div>
            <span class="result-value" id="resTotalPago">R$ 0,00</span>
        </div>

        <hr style="border: 0; border-top: 1px dashed #ddd; margin: 20px 0;">

        <div class="result-item">
            <div>
                <span class="result-label">Saldo da Aplica√ß√£o (na Contempla√ß√£o)</span>
                <span class="explanation">Saldo exato ap√≥s pagamento do Lance Livre</span>
            </div>
            <span class="result-value" id="resValorAplicacao">R$ 0,00</span>
        </div>
    </div>

    <!-- Grid de Evolu√ß√£o -->
    <div class="card full-width-card">
        <h2>Evolu√ß√£o Mensal (Fluxo de Caixa)</h2>
        <p class="explanation" style="margin-bottom: 15px;">
            Acompanhe a evolu√ß√£o. A parcela sofre <strong>reajuste anual</strong>. O Lance Livre √© deduzido na contempla√ß√£o.
        </p>
        
        <div class="table-container">
            <table id="tabelaEvolucao">
                <thead>
                    <tr>
                        <th>M√™s</th>
                        <th>Saldo Inicial</th>
                        <th>Rend. Aplic. (+)</th>
                        <th id="thRendaExtra">Rend. Carro (+)</th>
                        <th>Pag. Parcela (-)</th>
                        <th>Lance Livre (-)</th>
                        <th>Saldo Final</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- JS preenche aqui -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>